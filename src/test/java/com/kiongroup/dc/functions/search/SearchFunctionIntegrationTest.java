package com.kiongroup.dc.functions.search;

import java.io.IOException;
import java.util.Arrays;

import org.junit.Ignore;
import org.junit.Test;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.web.client.RestTemplate;

@Ignore
public class SearchFunctionIntegrationTest {

	private static final String CONFIG_URL = "http://localhost:7071/api/GetConfig";
	private static final String SEARCH_URL = "http://localhost:7071/api/SearchReferences";
	private static final String AZURE_TOKEN = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik4tbEMwbi05REFMcXdodUhZbkhRNjNHZUNYYyIsImtpZCI6Ik4tbEMwbi05REFMcXdodUhZbkhRNjNHZUNYYyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8xM2M3MjhlMC1iYjBjLTRjZjctOGUxMC01YjMyNzI3OWQ2ZDkvIiwiaWF0IjoxNTU1NDkyNjE5LCJuYmYiOjE1NTU0OTI2MTksImV4cCI6MTU1NTQ5NjUxOSwiYWNyIjoiMSIsImFpbyI6IkFTUUEyLzhMQUFBQTdpT2hoa0o0elRYZzRqbTVoZ0JpNStQYnpMcWxWUGRvajJEcFRFVGJFbGc9IiwiYW1yIjpbInB3ZCIsInJzYSJdLCJhcHBpZCI6ImM0NGI0MDgzLTNiYjAtNDljMS1iNDdkLTk3NGU1M2NiZGYzYyIsImFwcGlkYWNyIjoiMiIsImRldmljZWlkIjoiYmMyYjkxNjctMjM4NC00Mzc0LTgzMTAtMGU2MTQwMzkyOWY3IiwiZmFtaWx5X25hbWUiOiJMZW9uaGFyZHQiLCJnaXZlbl9uYW1lIjoiRmFsayIsImdyb3VwcyI6WyJjZTlkYTYzOC05NDQ0LTQ5MGMtOTI3Yi1kNGVmNmE4ZThkMzYiLCI0MWEwYzRlNy00NTZhLTQ1MWMtYjU2Ni01MzFjOWIyMzlmOTYiLCJlZWNiMWIyNi00ODZhLTRiYjAtYWY2Mi1kOTZjODE0ZDExM2UiLCIzZDE4ZGNhZS02Mzk4LTRkZGQtYmExMi0xMDYzZjg3ZWMyMDIiLCJkNjZlYjE1YS02OGYzLTQ3ZGUtYmU5OC0xYzkwYjY3ZTFhNWYiXSwiaW5fY29ycCI6InRydWUiLCJpcGFkZHIiOiIxNjUuMjI1LjcyLjEyMCIsIm5hbWUiOiJMZW9uaGFyZHQsIEZhbGsiLCJvaWQiOiJiZDE2OWM1Zi05ZmNlLTRkODEtYjY1OC03NjAwYzA4NmExMDkiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtMjE5NTczNDQtMTI2MDIyMTA1Mi0xMTU5NDIyMjI1LTMyMDM2OSIsInB1aWQiOiIxMDAzMjAwMDNCMjhGRDU4IiwicHdkX2V4cCI6IjExMzE1MzciLCJwd2RfdXJsIjoiaHR0cHM6Ly9zdHMua2lvbmdyb3VwLm5ldC9hZGZzL3BvcnRhbC91cGRhdGVwYXNzd29yZC8iLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiI5QnZRS1hQZk83eXVMMm54SnFISk8wdTlIQXBxX2ptRkJpdnFtWHZJNHRZIiwidGlkIjoiMTNjNzI4ZTAtYmIwYy00Y2Y3LThlMTAtNWIzMjcyNzlkNmQ5IiwidW5pcXVlX25hbWUiOiJmYWxrLmxlb25oYXJkdEBraW9uZ3JvdXAuY29tIiwidXBuIjoiZmFsay5sZW9uaGFyZHRAa2lvbmdyb3VwLmNvbSIsInV0aSI6InpCT2lIWW5aWkVTOHVWWTJCZzFKQUEiLCJ2ZXIiOiIxLjAifQ.kvrfX4DpPSUpbXfRx-vzRGRVgGMIMHTx7UlE2hkEtFeQXgmWUZcen5cPkRNrx5ZJ3ZQ8OcVKMDZ7twD7VgwMKJL9NSFoP4hHFwhkmG7TUHxIHZ4SKnUYEwqCuDCzwbgeunqVgnBG_bULXaahGRJ5oRXKy6giUOXST5_hZK0tx7OSBuwxx_yBb9ApIs0KVf4IyAYo3O7g5NJpRl8K5SuZ8DgZGgrt2akpLUyOrcYKppW3KdOQcfpTKhQqfnmDOnJWfCov6-KAjLMPvrG6I538sgyG077VbUmpr7FFMXuz1DhjwmlzI_INoeZe04o7bCOP02ErNpYCPiVFccCGw40Zkw";
		
	@Test
	public void someResults() throws IOException {
	
		HttpHeaders headers = new HttpHeaders();
		headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));
		headers.add("Authorization", "Bearer " + AZURE_TOKEN);
		
		HttpEntity<?> entity = new HttpEntity<>(headers);

		Object response = new RestTemplate().exchange(CONFIG_URL, HttpMethod.GET, entity, Object.class).getBody();
	}
	 
}
